+function(n,i){+function(t,r,e,o){function c(n,i,t){return 10*(t+n/4<<0)+i+n%4}function u(n,i){return n.repeat(i)}function a(n,i){return O.substr(n,i)}function f(){Y=1,clearTimeout(d),l()}function s(){Y=0,l(),A()}function m(n){if(F)return F=0,void E();if(W&&n in{89:1,78:1})switch(W=0,n){case 89:E();break;case 78:F=1,l()}if(!W){if(Y)return void s();if(n in{27:1,80:1}&&f(),n in{37:1,38:1,39:1}){var i=p(w);switch(n){case 37:i.x=0===i.x?0:i.x-1;break;case 39:var t=10-o[i.i];i.x=i.x===t?t:i.x+1;break;case 38:i=p(w,{i:e[w.i]}),i.x=Math.min(i.x,10-o[i.i])}w=v(i)||w,S(),l()}if(n in{40:1,32:1}){switch(n){case 40:g();break;case 32:for(;g(););}l(),A()}}}function p(n,i){return Object.assign({x:4,y:0,c:0,i:19*Math.random()<<0},n,i)}function v(n){if(!r[n.i].some(function(i,r){if(r=c(r,n.x,n.y),i&&(r>=200||t[r]))return 1}))return n}function h(){for(var i=200,r=10,e=0,o=0;i-=r;)t.slice(i,i+r).every(n)&&(t.splice(i,r),o+=r,e<4&&e++,++y%10===0&&(b=b<9?b+1:1));for(;o--;)t.unshift(0);j+=[0,50,150,350,1e3][e]*b,t.some(n)||(j+=2e3*b)}function S(){T=t.slice(),r[w.i].map(function(n,i){i=c(i,w.x,w.y),void 0!==T[i]&&(T[i]=T[i]||n)})}function g(){var n=p(w,{y:w.y+1,c:w.c+1});return w=v(n)||w,S(),w===n?1:w.c?(j+=10*b,w=P,P=p(),t=T,h(),T=t,void S()):(W=1,void i(function(){N(j,b,y)}))}function R(){var n="\n\r",i=u(" ",28),t=i+"<!",e="!>"+i,o=e+t,c=String.fromCharCode(9646),f=u(c,2),s=u(" ",80)+n;if(F)return i=u(" ",19),O=[-58917640,-942919668,858981133,-2096247688,-1023360221,53509168,-858816512].map(function(n){return(u("0",10)+(n>>>0).toString(2)).substr(-32)}).join("").substr(0,210).split("").map(function(n){return[" ",c][n]}).join("").match(/.{1,42}/g).join(i+n+i),void(O=u(s,8)+i+O+i+n+u(s,4)+u(" ",33)+"PRESS ANY KEY"+u(" ",34)+n+u(s,7));O=T.map(function(n){return[" .",f][n]}).join("").match(/.{20}/g).join(o),O=t+O+o+u("=",20)+e+i+"  "+u("\\/",10)+"  "+i;var m=y.toString();m="ROWS HIT:"+u(" ",15-m.length)+m,O=m+a(24);var p=j.toString().reverse().match(/.{1,3}/g).join(" ").reverse();p="SCORE:"+u(" ",18-p.length)+p,O=a(0,80)+p+a(104),O=a(0,160)+"LEVEL:"+u(" ",17)+b+a(184),r[P.i].map(function(n,i){i=80*(10+2*i/8<<0)+20+2*i%8,n&&(O=a(0,i)+f+a(i+2))}),O=a(0,138)+"UP ARROW: ROTATE"+a(154),O=a(0,216)+"DOWN ARROW: SOFT DROP"+a(237),O=a(0,298)+"SPACEBAR: HARD DROP"+a(317),O=a(0,380)+"ESC, P: PAUSE"+a(393),Y&&(O=a(0,757)+"PAUSED"+a(763)),W&&(O=a(0,756)+"TRY AGAIN?"+a(766),O=a(0,836)+"   Y/N    "+a(846)),O=O.match(/.{1,80}/g).join(n),O=s+O+n+u(s,2)}function l(){R(),k(O)}function x(n){N=n.finish||D,(k=n.nextFrame||D)(O)}function A(){clearTimeout(d),W||F||(d=i(function(){g(),l(),A()},100*(10-b)))}function E(){P=p(),w=P,t=C,b=1,j=0,y=0,W=0,S(),l(),A()}var O,T,d,b,j,y,P=p(),w=P,C=t.slice(),D=function(){},k=D,N=D,W=0,Y=0,F=1;E(),window.TETRIS={on:x,pause:f,pressKey:m,start:E,upause:s}}("0".repeat(200).split("").map(n),[785,23,547,116,51,114,305,39,562,15,4369,99,306,54,561,802,113,275,71].map(function(i){return(i>>>0).toString(2).split("").reverse().map(n)}),[1,2,3,0,4,6,7,8,5,10,9,12,11,14,13,16,17,18,15],[2,3,2,3,2,3,2,3,2,4,1,3,2,3,2,2,3,2,3])}(parseFloat,setTimeout),String.prototype.reverse=function(){for(var n="",i=this.length;i--;)n+=this.charAt(i);return n};