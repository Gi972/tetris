+function(){function e(){clearInterval(n),n=0}function t(t){if(keyCode=t.which>0?t.which:t.keyCode,!n||keyCode!==r){r=keyCode;var o=function(){TETRIS.pressKey(keyCode)};o(),e();var i={37:100,39:100,40:50};n=setInterval(o,i[keyCode]||200)}}var n,r;document.addEventListener("click",function(){document.getElementById("score").style.display="none",addEventListener("keydown",t)}),addEventListener("keyup",e),addEventListener("keydown",t),TETRIS.on({finish:function(e){try{var n=(new Date).getTime(),r=JSON.parse(localStorage.getItem("tetrisScore"))||[];r.push({t:n,s:e}),localStorage.setItem("tetrisScore",JSON.stringify(r)),r=r.sort(function(e,t){return t.s-e.s}).map(function(t){if(t.s){var r=t.s.toString().split("").reverse().join("").match(/.{1,3}/g).join(" ").split("").reverse().join("");r="&nbsp;".repeat(18-r.length)+r;var o;return n===t.t&&e===t.s&&(o="highlighted"),"<span"+(o?' id="'+o+'"':"")+">"+new Date(t.t).toLocaleDateString()+r+"</span>"}}).join("<br>");var o=document.getElementById("score");o.innerHTML=r,o.style.display="block",(o=document.getElementById("highlighted"))&&o.scrollIntoView(),removeEventListener("keydown",t)}catch(e){}},nextFrame:function(e){e=e.replace(/[ <>]|\n\r/g,function(e){return{" ":"&nbsp;","<":"&lsaquo;",">":"&rsaquo;","\n\r":"<br>"}[e]}),document.getElementById("container").innerHTML=e}})}();